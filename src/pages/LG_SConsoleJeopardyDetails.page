<apex:page standardController="Case" extensions="LG_SConsoleJeopardyDetailsExtension" action="{!applyExtraCharges}">
    <link rel="stylesheet" href="/apex/sfLigtningOverride" />
    <apex:includeScript value="/support/console/22.0/integration.js"/>
    <script type="text/javascript">
        function testOpenPrimaryTab(urltab, caseNumber) {
            sforce.console.openPrimaryTab(null, urltab, true, caseNumber, openSuccess, caseNumber);
		}
        var openSuccess = function openSuccess(result) {
            //Report whether opening the new tab was successful
            //if (result.success == false) {
               // alert('Error occured, please contact Admin');
           // }
        };

    </script>

     <style type="text/css">
          span[id*=ec] {
            opacity: 0.5;
            cursor : default;
         }
     </style>

    <apex:form id="fullPage">
        <apex:pageMessages id="pagemessage"></apex:pageMessages>
        <apex:pageBlock title="" mode="{!Mode}">
            <apex:pageBlockSection title="Account Details" columns="2" collapsible="false" rendered="{!Jeopardy}">
                <!--Modified as a part of SFOM-513 - Start-->
                <!--<apex:outputText value="{!Solution.csord__Order__r.csord__Account__r.Name}" label="Account Name"></apex:outputText>  -->
                <apex:outputField value="{!Solution.csord__Order__r.csord__Account__c}"/>
                <apex:outputField label="Address" value="{!solution.LG_Address__r.LG_FullAddressDetails__c}" />
                <!--Modified as a part of SFOM-513 - End-->
                <!--Modified as a part of SFOM-512 - Start-->
                <apex:outputText value="{!Solution.LG_Address__r.LG_TechnicalContact__r.Name}" label="Contact Name"></apex:outputText>
                <apex:outputField label="Phone" value="{!Solution.LG_Address__r.LG_TechnicalContact__r.phone}"/>
                <!--Modified as a part of SFOM-512 - End-->
            </apex:pageBlockSection>
            <apex:pageBlockSection title="Suborder Details" columns="1" collapsible="false" rendered="{!!Edit}">
                <apex:pageBlockSection columns="2">
                <apex:outputfield value="{!Solution.csord__Order__r.csordtelcoa__Opportunity__c}" rendered="{!Jeopardy}"/>
                <apex:outputfield value="{!Solution.csord__Order__c}" rendered="{!Jeopardy}"/>
                <apex:outputText label="Solution" rendered="{!Jeopardy}">
                   <apex:outputLink value="/{!Solution.Id}" >{!Solution.LG_Solution_Name__c}</apex:outputLink>
                </apex:outputText>
                <apex:outputText value="{!Solution.LG_JeopardyExplanation__c}" rendered="{!Jeopardy}"/>
                <apex:outputField value="{!Solution.OwnerId}" label="Suborder Owner" rendered="{!TypeCost}"/>
                <apex:outputField value="{!Solution.LG_JeopardyRaisedBy__c}" rendered="{!Jeopardy}"/>
                <apex:outputText label="Jeopardy Reason" value="{!Solution.Jeopardy_Reason__c}" rendered="{!Jeopardy}"/>
                <apex:outputText value="{!Solution.LG_ApproverComments__c}" rendered="{!TypeCost}"/>
                <!--Removed as SFOM-546 is removed from scope -->
                <!--<apex:outputField value="{!Solution.LG_OrderChanged__c}" rendered="{!Jeopardy}"/>
                <apex:outputField value="{!Solution.LG_OrderCancelled__c}" rendered="{!Jeopardy}"/> -->
                </apex:pageBlockSection>

            </apex:pageBlockSection>



            <apex:pageBlockSection title="Service Details" columns="1" collapsible="false" rendered="{!Jeopardy}">
                <apex:pageBlockTable value="{!Service}"  var="serviceObj">
                    <apex:column headerValue="Services">
                        <apex:outputLink value="{!URLFOR($Action.csord__Service__c.View, serviceObj.Id)}" >{!serviceObj.name}</apex:outputLink>
                    </apex:column>
                    <apex:column headerValue="Status" Value="{!serviceObj.csord__Status__c}" />
                    <!-- SFOM - 647 Added by : Ankur Gupta -- Start -->
                    <apex:column headerValue="Delta Status" value="{!serviceObj.csordtelcoa__Delta_Status__c}"/>
                    <!-- SFOM - 647 Added by : Ankur Gupta -- End -->
                </apex:pageBlockTable>

            </apex:pageBlockSection>

            <apex:pageBlockSection title="Billing Details" columns="1" collapsible="false" rendered="{!!TypeInstActive}">
                <apex:pageBlockTable value="{!ProvisioningDetails}"  var="provObj">
                    <apex:column headerValue="Product, Price, Billing Codes">
                        <apex:outputText rendered="{!provObj.child}">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</apex:outputText>
                        <apex:outputText rendered="{!!provObj.child}"><b>&bull;</b>&nbsp;&nbsp;</apex:outputText>
                        <apex:outputText rendered="{!provObj.child}">&bull;&nbsp;&nbsp;</apex:outputText>
                        <apex:outputText rendered="{!!provObj.child}">{!provObj.name}</apex:outputText>
                        <apex:outputText rendered="{!provObj.child}">{!provObj.serviceLineItems.Name},&nbsp;</apex:outputText>
                        <apex:outputText value="{0, number, {!currencyType}}" rendered="{!provObj.child}">
                            <apex:param value="{!provObj.serviceLineItems.csord__Total_Price__c}"/>
                        </apex:outputText>
                    </apex:column>
                <apex:column headerValue="Billing Account Name, External Id">
                    <apex:outputLink value="{!URLFOR('/apex/LG_SConsoleBillingAccDetails?id='+provObj.serviceLineItems.LG_BillingAccount__c, null)}" rendered="{!provObj.serviceLineItems.LG_BillingAccount__r.Name != null}">{!provObj.serviceLineItems.LG_BillingAccount__r.Name}, {!provObj.serviceLineItems.LG_BillingAccount__r.LG_ExternalId__c}</apex:outputLink>
                </apex:column>
                <apex:column headerValue="Status">
                    <apex:outputText value="{!provObj.serviceLineItems.csord__Service__r.csord__Status__c}"> </apex:outputText>
                </apex:column>
                <apex:column headerValue="Start Date">
                    <apex:outputText rendered="{!!provObj.child}"></apex:outputText>
                    <apex:outputField value="{!provObj.serviceLineItems.csord__Service__r.LG_EffectiveDate__c}" rendered="{!provObj.child}"></apex:outputField>
                </apex:column>
                    <!-- SFOM - 647 Added by : Ankur Gupta -- Start -->
                    <apex:column headerValue="Delta Status" value="{!provObj.serviceLineItems.csordtelcoa__Delta_Status__c}"/>
                    <!-- SFOM - 647 Added by : Ankur Gupta -- End -->
                </apex:pageBlockTable>
                <apex:outputText value=""/>
            </apex:pageBlockSection>

            <apex:pageBlockSection title="Related Suborder Details" columns="1" collapsible="false" rendered="{!RelatedSolutions.size > 0}">
                <apex:pageBlockTable value="{!RelatedSolutions}"  var="relSolObj" >
                    <apex:column headerValue="Related Suborders">
                        <apex:outputLink value="{!URLFOR($Action.csord__Solution__c.View, relSolObj.Id)}" >{!relSolObj.Name}</apex:outputLink>
                    </apex:column>

                </apex:pageBlockTable>

            </apex:pageBlockSection>
            <apex:pageBlockSection title="Outcome" columns="6" collapsible="false" rendered="{!Jeopardy}">
               <!-- <apex:commandButton value="Inflight Change" action="{!InflightChange}" onclick="if(!confirm('This action will close the Case. Are you sure you want to continue?')){return false};"/>-->
                <!-- OMB-2493 making the buttons disabled. Removing the expression {!isCaseClosed || cancelRequested} -->
                <!-- OMB-3264 commenting the unused buttons -->
                <!--<apex:commandButton value="Complex Change" action="{!complexChange}" onclick="if(!confirm('Complex Change?')){return false};" disabled="true"  />
                <apex:commandButton value="Request Cancel" action="{!requestCancel}" onclick="if(!confirm('Request Cancel?')){return false};" oncomplete="testOpenPrimaryTab('{!caseURL}','{!caseNumber}');" disabled="true" reRender="fullPage"/>
                <apex:commandButton value="Follow-on Order" action="{!FollowOrder}" onclick="if(!confirm('Follow-on Order?')){return false};" oncomplete="testOpenPrimaryTab('{!caseURL}','{!caseNumber}');" disabled="true" reRender="pagemessage"/>-->
                 <apex:commandButton value="Close Jeopardy" action="{!closeJeopardy}" onclick="if(!confirm('Close Jeopardy?')){return false};" disabled="{!isCaseClosed || cancelRequested}"/>



            </apex:pageBlockSection>
            </apex:pageBlock>
    </apex:form>

</apex:page>